*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
  background:#f5f7fa;color:#2d3748;line-height:1.6
}
.container{max-width:1400px;margin:0 auto;padding:20px}

/* 헤더 */
header{text-align:center;margin-bottom:20px;padding:30px 0;background:white;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.05)}
header h1{font-size:2.5rem;color:#1a202c;margin-bottom:8px}
.subtitle{color:#718096;font-size:1.1rem}

/* Tabs */
.tabs{display:flex;gap:10px;justify-content:center;margin:0 auto 20px;padding:10px}
.tab-btn{border:1px solid #e2e8f0;background:#fff;color:#2d3748;padding:10px 14px;border-radius:10px;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,0.04)}
.tab-btn.active{border-color:#4299e1;background:#ebf8ff;font-weight:700}
.hidden{display:none!important}

/* Health banner */
.health-banner{
  max-width:1400px;margin:0 auto 20px;background:#fff5f5;border:1px solid #fed7d7;color:#742a2a;
  padding:12px 14px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.04)
}
.health-banner strong{margin-right:8px}

/* Stats */
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:40px}
.stat-card{background:white;padding:25px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.05);transition:transform 0.2s}
.stat-card:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.1)}
.stat-label{font-size:0.9rem;color:#718096;margin-bottom:8px}
.stat-value{font-size:2rem;font-weight:700;color:#2d3748}

/* Channel cards */
.channel-stats{margin-bottom:40px}
.channel-stats h2{margin-bottom:20px;color:#1a202c}
.channel-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}
.channel-card{background:white;padding:25px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.05);border-left:4px solid #4299e1}
.channel-card h3{font-size:1.3rem;margin-bottom:15px;color:#2d3748}
.channel-card .metric{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #e2e8f0}
.channel-card .metric:last-child{border-bottom:none}
.channel-card .metric-label{color:#718096;font-size:0.9rem}
.channel-card .metric-value{font-weight:600;color:#2d3748}

/* Charts */
.charts-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:20px;margin-bottom:40px}
.chart-box{background:white;padding:25px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.05)}
.chart-box h2{font-size:1.3rem;margin-bottom:20px;color:#1a202c}
.chart-box canvas{max-height:300px}

/* Table */
.table-container{background:white;padding:25px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.05);margin-bottom:40px}
.table-container h2{margin-bottom:20px;color:#1a202c}
.table-controls{display:flex;gap:10px;margin-bottom:20px}
.table-controls button,.table-controls select{
  padding:10px 20px;border:1px solid #e2e8f0;border-radius:8px;background:white;cursor:pointer;font-size:0.95rem;transition:all 0.2s
}
.table-controls button:hover{background:#f7fafc;border-color:#cbd5e0}
table{width:100%;border-collapse:collapse}
thead{background:#f7fafc}
th,td{padding:15px;text-align:left;border-bottom:1px solid #e2e8f0}
th{font-weight:600;color:#4a5568;font-size:0.9rem;text-transform:uppercase}
tbody tr:hover{background:#f7fafc}

/* Common controls */
.input,.select{
  padding:10px 12px;border:1px solid #e2e8f0;border-radius:10px;background:#fff;min-width:220px
}
.select{min-width:180px}
.btn{
  padding:10px 12px;border:1px solid #e2e8f0;border-radius:10px;background:#fff;text-decoration:none;color:#2d3748;cursor:pointer
}
.btn:hover{background:#f7fafc}
.btn.primary{background:#2b6cb0;color:white;border-color:#2b6cb0}
.btn.primary:hover{background:#2c5282}

/* Manage layout */
.manage-header{display:flex;align-items:flex-start;justify-content:space-between;gap:16px;margin-bottom:14px}
.manage-actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
.manage-layout{display:grid;grid-template-columns:1.6fr 1fr;gap:16px}
.manage-table{width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.05)}
.manage-table th,.manage-table td{padding:12px 12px;border-bottom:1px solid #e2e8f0}
.manage-table tbody tr:hover{background:#f7fafc;cursor:pointer}
.hint{color:#718096;font-size:0.9rem;margin-top:8px}

.manage-detail{
  background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.05);padding:16px;
  position:sticky;top:16px;height:fit-content
}
.detail-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px}
.detail-title{font-size:1.2rem;font-weight:800}
.detail-sub{font-size:0.85rem;color:#718096;margin-top:2px}
.icon-btn{border:1px solid #e2e8f0;background:#fff;border-radius:10px;padding:8px 10px;cursor:pointer}
.icon-btn:hover{background:#f7fafc}

.detail-badges{display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap}
.badge{padding:6px 10px;border-radius:999px;font-weight:700;font-size:0.85rem;border:1px solid #e2e8f0}
.badge.on{background:#f0fff4;border-color:#c6f6d5;color:#22543d}
.badge.off{background:#edf2f7;border-color:#e2e8f0;color:#2d3748}
.badge.review{background:#ebf8ff;border-color:#bee3f8;color:#2a4365}
.badge.limit{background:#fff5f5;border-color:#fed7d7;color:#742a2a}
.chip{padding:6px 10px;border-radius:999px;background:#f7fafc;border:1px solid #e2e8f0;font-size:0.85rem;color:#2d3748}
.detail-block{margin-top:12px}
.detail-label{font-size:0.9rem;color:#718096;margin-bottom:6px}
.detail-text{white-space:pre-wrap;line-height:1.5;padding:10px 12px;border:1px solid #e2e8f0;border-radius:10px;background:#f7fafc}
.kpi-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.kpi{border:1px solid #e2e8f0;border-radius:10px;padding:10px 12px;background:#fff}
.kpi-label{color:#718096;font-size:0.85rem}
.kpi-value{font-weight:800;font-size:1.05rem;margin-top:4px}
.muted{color:#718096}

/* Tasks */
.tasks-toolbar{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-start;margin:10px 0 14px}
.tasks-panels{display:grid;grid-template-columns:1fr 1.6fr;gap:16px}
.panel{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.05);padding:16px}
.panel h3{margin-bottom:10px}
.panel-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}

.task-list{display:flex;flex-direction:column;gap:10px}
.task-item{
  border:1px solid #e2e8f0;border-radius:12px;padding:10px 12px;background:#f7fafc;
  display:flex;justify-content:space-between;gap:10px
}
.task-left{display:flex;flex-direction:column}
.task-title{font-weight:800}
.task-meta{color:#718096;font-size:0.85rem}
.task-right{display:flex;align-items:center;gap:8px}

.create-form{border:1px dashed #cbd5e0;border-radius:12px;padding:12px;background:#f7fafc;margin-bottom:12px}
.form-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
.form-actions{display:flex;justify-content:flex-end;gap:10px;margin-top:10px}

@media (max-width: 1000px){
  .manage-layout{grid-template-columns:1fr}
  .tasks-panels{grid-template-columns:1fr}
  .form-grid{grid-template-columns:1fr}
  .input{min-width:180px}
}
@media (max-width: 768px){
  .container{padding:10px}
  header h1{font-size:1.8rem}
  .stats-grid,.channel-grid,.charts-container{grid-template-columns:1fr}
  .chart-box canvas{max-height:250px}
  table{font-size:0.85rem}
  th,td{padding:10px 8px}
}
footer{text-align:center;padding:20px;color:#718096;font-size:0.9rem}

/* ===== Modal ===== */
.modal.hidden { display: none; }
.modal { position: fixed; inset: 0; z-index: 9999; }

.modal-backdrop {
  position: absolute; inset: 0;
  background: rgba(0,0,0,0.35);
}

.modal-card {
  position: relative;
  width: min(720px, calc(100vw - 32px));
  margin: 72px auto;
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 14px 40px rgba(0,0,0,0.18);
  padding: 14px 14px 12px;
}

.modal-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 6px 8px 10px;
  border-bottom: 1px solid #eee;
}

.modal-title { font-size: 16px; font-weight: 700; }

.modal-body { padding: 12px 8px 8px; }

.modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding: 10px 8px 6px;
  border-top: 1px solid #eee;
}

.btn.danger {
  background: #e53e3e;
  border-color: #e53e3e;
  color: #fff;
}

.field { display: flex; flex-direction: column; gap: 6px; }
.field-label { font-size: 12px; color: #666; }

/* 할 일 테이블: 레이아웃 안정화 */
#tasksSection .manage-table {
  table-layout: fixed;   /* 컬럼 폭 제어를 확실히 */
  width: 100%;
}

/* 제목 컬럼: 너무 넓지 않게 */
#tasksSection .manage-table th:nth-child(3),
#tasksSection .manage-table td:nth-child(3) {
  width: 28%;
  min-width: 180px;
}

/* 상태(select) */
#tasksSection .manage-table th:nth-child(4),
#tasksSection .manage-table td:nth-child(4) { width: 92px; }

/* 우선순위(select) */
#tasksSection .manage-table th:nth-child(5),
#tasksSection .manage-table td:nth-child(5) { width: 84px; }

/* 마감일(date) */
#tasksSection .manage-table th:nth-child(6),
#tasksSection .manage-table td:nth-child(6) { width: 110px; }

/* 채널 */
#tasksSection .manage-table th:nth-child(7),
#tasksSection .manage-table td:nth-child(7) { width: 120px; }

/* 태그 */
#tasksSection .manage-table th:nth-child(8),
#tasksSection .manage-table td:nth-child(8) { width: 110px; }

/* 관리(편집/삭제 버튼) */
#tasksSection .manage-table th:nth-child(9),
#tasksSection .manage-table td:nth-child(9) { width: 86px; }

#tasksSection .manage-table td:nth-child(3) .task-title {
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  word-break: keep-all;
  overflow-wrap: normal;
}

#tasksSection .manage-table td:nth-child(7),
#tasksSection .manage-table td:nth-child(8) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#tasksSection .manage-table select.select {
  width: 100%;
  max-width: 100%;
}

/* 제목 셀의 텍스트 처리 */
#tasksSection .manage-table td:nth-child(3) .task-title {
  display: block;
  white-space: nowrap;        /* 한 줄 */
  overflow: hidden;           /* 넘치면 숨김 */
  text-overflow: ellipsis;    /* ... 처리 */
  word-break: keep-all;       /* 한국어 글자 단위 쪼개짐 방지 */
  overflow-wrap: normal;      /* anywhere류 방지 */
}

/* 할 일 탭: 오늘/지연 위, 전체 할 일 아래로 쌓기 */
#tasksSection .tasks-panels {
  display: flex;
  flex-direction: column; /* 핵심 */
  gap: 16px;              /* 패널 간격 */
}

/* 패널이 가로폭을 꽉 쓰도록 */
#tasksSection .tasks-panels > .panel {
  width: 100%;
}

/* =========================
   [Fix] 전체 할 일 테이블 겹침 해결
   - 왼쪽(완료/카테고리/제목) 폭 축소
   - 상태/우선/마감 컨트롤 폭 제한
   - 셀 padding 축소
   ========================= */

#tasksSection .manage-table {
  table-layout: fixed;
  width: 100%;
}

/* 셀 padding 줄여서 오른쪽 공간 확보 */
#tasksSection .manage-table th,
#tasksSection .manage-table td {
  padding: 10px 10px;
  vertical-align: middle;
}

/* 완료(1) 아주 좁게 */
#tasksSection .manage-table th:nth-child(1),
#tasksSection .manage-table td:nth-child(1) {
  width: 44px;
}

/* 카테고리(2) 좁게 */
#tasksSection .manage-table th:nth-child(2),
#tasksSection .manage-table td:nth-child(2) {
  width: 70px;
}

/* 제목(3) “과하게 넓음” 방지: 적당히만 */
#tasksSection .manage-table th:nth-child(3),
#tasksSection .manage-table td:nth-child(3) {
  width: 32%;
  min-width: 140px;
}

/* 상태(4) */
#tasksSection .manage-table th:nth-child(4),
#tasksSection .manage-table td:nth-child(4) { width: 92px; }

/* 우선순위(5) */
#tasksSection .manage-table th:nth-child(5),
#tasksSection .manage-table td:nth-child(5) { width: 80px; }

/* 마감일(6) */
#tasksSection .manage-table th:nth-child(6),
#tasksSection .manage-table td:nth-child(6) { width: 120px; }

/* 채널(7) */
#tasksSection .manage-table th:nth-child(7),
#tasksSection .manage-table td:nth-child(7) { width: 130px; }

/* 태그(8) */
#tasksSection .manage-table th:nth-child(8),
#tasksSection .manage-table td:nth-child(8) { width: 110px; }

/* 관리(9) */
#tasksSection .manage-table th:nth-child(9),
#tasksSection .manage-table td:nth-child(9) { width: 86px; }

/* 제목 말줄임(이미 적용한 A안 유지) */
#tasksSection .manage-table td:nth-child(3) .task-title {
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  word-break: keep-all;
  overflow-wrap: normal;
}

/* 채널/태그 말줄임 */
#tasksSection .manage-table td:nth-child(7),
#tasksSection .manage-table td:nth-child(8) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ✅ 핵심: 상태/우선/마감 칸의 컨트롤이 셀을 넘지 못하게 */
#tasksSection .manage-table td:nth-child(4) select,
#tasksSection .manage-table td:nth-child(5) select,
#tasksSection .manage-table td:nth-child(6) select,
#tasksSection .manage-table td:nth-child(6) input[type="date"] {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* select 기본 min-width로 인한 침범 방지(브라우저별 안전장치) */
#tasksSection .manage-table select {
  min-width: 0;
}

/* =========================
   [Mobile] 할 일 탭 폭 통일
   - 오늘/지연 패널도 전체폭(100%) 사용
   ========================= */
@media (max-width: 640px) {
  #tasksSection .tasks-panels {
    width: 100%;
  }

  #tasksSection .tasks-panels > .panel {
    width: 100% !important;
    max-width: 100% !important;
    align-self: stretch !important;
  }

  /* 오늘/지연 리스트/아이템도 폭 100% */
  #tasksSection #todayTasks,
  #tasksSection #todayTasks .task-item {
    width: 100% !important;
    max-width: 100% !important;
  }
}
